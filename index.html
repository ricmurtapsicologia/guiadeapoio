<!DOCTYPE html>
<html lang="pt">

<head>
	<meta charset="UTF-8" />
	<title>Guia de Apoio - Exemplo</title>
	<meta name="description" content="Guia de Apoio interativo que ajuda voc√™ a enxergar seus pensamentos de forma mais leve e transform√°-los em experi√™ncias positivas." />
	<meta name="keywords" content="Psicologia, Desfus√£o Cognitiva, Emo√ß√µes, Pensamentos, Acolhimento" />
	<meta name="author" content="richelmy murta, psic√≥logo cl√≠nico especialista em terapia cognitivo-comportamental" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<!-- Importa o GSAP para anima√ß√µes -->
	<script src="https://cdn.jsdelivr.net/npm/gsap@3/dist/gsap.min.js"></script>
	<style>
		/* ===========================
		   VARI√ÅVEIS DE COR E LAYOUT
		============================ */
		:root {
		  --bg-color: #1464D2;     /* Fundo principal (azul unificado) */
		  --card-bg: #ffffff;      /* Fundo dos cards */
		  --text-color: #333;      /* Texto principal */
		  --primary-color: #1464D2; 
		  --secondary-color: #0D4BA3;
		  --white: #fff;
		  --border-radius: 10px;
		  --transition-time: 0.6s;
		}
		
		/* ===========================
		   RESET B√ÅSICO E FONTE
		============================ */
		* {
		  margin: 0;
		  padding: 0;
		  box-sizing: border-box;
		}
		html, body {
		  height: 100%;
		}
		body {
		  font-family: Arial, sans-serif;
		  background: var(--bg-color);
		  display: flex;
		  flex-direction: column;
		  min-height: 100vh;
		  overflow-x: hidden;
		}
		
		/* ===========================
		   CABE√áALHO
		============================ */
		header {
		  width: 100%;
		  max-width: 900px;
		  margin: 1.5rem auto 0 auto;
		  background: var(--primary-color);
		  color: var(--white);
		  text-align: center;
		  padding: 1.5rem;
		  border-radius: 0 0 var(--border-radius) var(--border-radius);
		  box-shadow: none;
		}
		header h1 {
		  font-size: 1.5rem;
		  margin-bottom: 0.5rem;
		}
		#trophies-container {
		  display: flex;
		  justify-content: center;
		  gap: 5px;
		  margin-top: 0.3rem;
		}
		.trophy {
		  font-size: 1.3rem;
		}
		#encouragement-msg {
		  margin-top: 0.3rem;
		  font-size: 0.9rem;
		  color: var(--white);
		  font-style: italic;
		}
		input[type="date"] {
		  display: block;
		}
		
		/* ===========================
		   CONTE√öDO PRINCIPAL
		============================ */
		main {
		  flex: 1;
		  width: 100%;
		  max-width: 900px;
		  margin: 0 auto;
		  position: relative;
		  display: flex;
		  justify-content: center;
		  align-items: center;
		}
		
		/* ===========================
		   SE√á√ïES (P√ÅGINAS)
		============================ */
		.page {
		  position: absolute;
		  top: 50%;
		  left: 50%;
		  transform: translate(-50%, -50%) scale(0.9);
		  width: 100%;
		  max-width: 600px;
		  background: var(--card-bg);
		  color: var(--text-color);
		  border-radius: var(--border-radius);
		  padding: 2rem;
		  box-shadow: none;
		  opacity: 0;
		  transition: transform var(--transition-time) ease, opacity var(--transition-time) ease;
		  z-index: 0;
		}
		.page.active {
		  transform: translate(-50%, -50%) scale(1);
		  opacity: 1;
		  z-index: 1;
		}
		/* Ajuste na splash para layout sim√©trico (usando flexbox + column) */
		#splash {
		  display: flex;
		  flex-direction: column;
		  justify-content: center;
		  align-items: center;
		}
		
		/* ===========================
		   CONTE√öDO INTERNO DAS P√ÅGINAS
		============================ */
		.content {
		  display: flex;
		  flex-direction: column;
		  gap: 1rem;
		  text-align: justify;
		  line-height: 1.4;
		}
		.content h2 {
		  font-size: 1.2rem;
		  text-align: center;
		}
		.content p {
		  font-size: 1rem;
		}
		
		/* ===========================
		   BOT√ïES (Voltar e Prosseguir)
		============================ */
		.buttons {
		  display: flex;
		  gap: 1rem;
		  margin-top: 1.5rem;
		  justify-content: center;
		}
		.buttons button {
		  flex: 1;
		  max-width: 140px;
		  text-align: center;
		}
		button {
		  background: var(--primary-color);
		  color: var(--white);
		  border: none;
		  padding: 0.8rem 1rem;
		  border-radius: 8px;
		  font-size: 1rem;
		  cursor: pointer;
		  transition: transform 0.2s, background 0.3s ease;
		  box-shadow: none;
		}
		button:hover {
		  background: var(--secondary-color);
		}
		button:active {
		  transform: translateY(2px);
		}
		
		/* ===========================
		   CAMPOS DE ENTRADA
		============================ */
		input, textarea {
		  width: 100%;
		  padding: 0.8rem;
		  font-size: 1rem;
		  border: 1px solid #ccc;
		  border-radius: 4px;
		  outline: none;
		}
		
		/* ===========================
		   GRID DE SENTIMENTOS
		============================ */
		.feelings-grid {
		  display: grid;
		  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
		  gap: 0.5rem;
		  margin-top: 1rem;
		}
		.feeling-option {
		  background: #f7f7f7;
		  border-radius: 4px;
		  border: 1px solid #ccc;
		  padding: 0.5rem;
		  text-align: center;
		  cursor: pointer;
		  transition: background 0.3s ease;
		}
		.feeling-option:hover {
		  background: #ebebeb;
		}
		.feeling-option.selected {
		  background: var(--primary-color);
		  color: var(--white);
		  border-color: var(--primary-color);
		}
		
		/* ===========================
		   BOT√ÉO DE WHATSAPP (LANDING)
		============================ */
		.whatsapp-button {
		  display: inline-flex;
		  align-items: center;
		  justify-content: center;
		  gap: 0.5rem;
		  background: #25D366;
		  border: none;
		  color: #fff;
		  font-size: 1rem;
		  font-weight: bold;
		  padding: 0.8rem 1rem;
		  border-radius: 8px;
		  cursor: pointer;
		  transition: background 0.3s ease;
		}
		.whatsapp-button:hover {
		  background: #20c060;
		}
		.whatsapp-button:active {
		  transform: translateY(2px);
		}
		.whatsapp-button svg {
		  width: 1.2rem;
		  height: 1.2rem;
		  fill: #fff;
		}
		.buttons .whatsapp-button {
		  flex: 1;
		  max-width: 140px;
		  text-align: center;
		}
		
		/* ===========================
		   RODAP√â
		============================ */
		footer {
		  width: 100%;
		  max-width: 900px;
		  margin: 0 auto;
		  background: var(--primary-color);
		  color: var(--white);
		  padding: 1rem 2rem;
		  font-size: 0.9rem;
		  text-align: center;
		  border-radius: var(--border-radius) var(--border-radius) 0 0;
		  box-shadow: none;
		}
		footer p {
		  margin: 0.5rem 0;
		  line-height: 1.4;
		}
		
		/* ===========================
		   RESPONSIVIDADE
		============================ */
		@media (max-width: 768px) {
		  header {
		    margin-top: 1rem;
		    padding: 1rem;
		  }
		  .page {
		    padding: 1rem;
		  }
		  .buttons {
		    flex-direction: row;
		  }
		}
	</style>
</head>

<body>
	<!-- CABE√áALHO -->
	<header>
		<h1>Guia de Apoio</h1>
		<div id="trophies-container"></div>
		<div id="encouragement-msg"></div>
	</header>
	<!-- CONTE√öDO PRINCIPAL -->
	<main>
		<!-- SPLASH (exibido por 2 segundos) -->
		<section id="splash" class="page active">
			<div class="content">
				<h2>Bem-vindo(a) ao Guia de Apoio</h2>
				<p>Aguarde.....</p>
			</div>
		</section>
		<!-- ONBOARDING 1 -->
		<section id="onb1" class="page">
			<div class="content">
				<h2>Bem-vindo(a)!</h2>
				<p> Este guia ajuda voc√™ a ver seus pensamentos de forma mais leve, como simples eventos da mente. </p>
				<div class="buttons">
					<button class="skip-button" data-next="step1">Pular</button>
					<button class="next-button" data-next="onb2">Pr√≥ximo</button>
				</div>
			</div>
		</section>
		<!-- ONBOARDING 2 -->
		<section id="onb2" class="page">
			<div class="content">
				<h2>O que voc√™ encontrar√°?</h2>
				<p> Orienta√ß√µes e exemplos pr√°ticos para transformar seus pensamentos e facilitar o seu dia. </p>
				<div class="buttons">
					<button class="skip-button" data-next="step1">Pular</button>
					<button class="next-button" data-next="onb3">Pr√≥ximo</button>
				</div>
			</div>
		</section>
		<!-- ONBOARDING 3 -->
		<section id="onb3" class="page">
			<div class="content">
				<h2>Pronto para come√ßar?</h2>
				<p> Aprenda a observar seus pensamentos sem se identificar com eles e melhore sua forma de lidar com desafios. </p>
				<div class="buttons">
					<button class="skip-button" data-next="step1">Pular</button>
					<button class="next-button" data-next="onb4">Pr√≥ximo</button>
				</div>
			</div>
		</section>
		<!-- ONBOARDING 4 -->
		<section id="onb4" class="page">
			<div class="content">
				<h2>Vamos l√°!</h2>
				<p> Iniciaremos o exerc√≠cio. Siga as instru√ß√µes e descubra como transformar sua rela√ß√£o com os pensamentos. </p>
				<div class="buttons">
					<button class="skip-button" data-next="step1">Pular</button>
					<button class="next-button" data-next="step1">Pr√≥ximo</button>
				</div>
			</div>
		</section>
		<!-- EXERC√çCIO (ABA 1) - APENAS NOME E DATA -->
		<section id="step1" class="page">
			<div class="content">
				<h2>Identifica√ß√£o</h2>
				<p>Por favor, insira seu nome e a data de hoje para iniciarmos.</p>
				<input id="user-name" type="text" placeholder="Seu primeiro nome..." />
				<input id="user-date" type="date" />
				<div class="buttons">
					<button data-next="step2">Prosseguir</button>
				</div>
			</div>
		</section>
		<!-- EXERC√çCIO (ABA 2) - SENTIMENTOS -->
		<section id="step2" class="page">
			<div class="content">
				<h2>Como voc√™ est√° se sentindo?</h2>
				<p>Selecione as emo√ß√µes que melhor representam o seu estado atual.</p>
				<div class="feelings-grid" id="feelings-grid"></div>
				<div class="buttons">
					<button data-previous="step1">Voltar</button>
					<button data-next="step3">Prosseguir</button>
				</div>
			</div>
		</section>
		<!-- EXERC√çCIO (ABA 3) - PENSAMENTO -->
		<section id="step3" class="page">
			<div class="content">
				<h2>O que passa pela sua cabe√ßa agora?</h2>
				<p>Reflita sobre o que est√° ocupando sua mente agora e descreva abaixo ‚Äì n√£o se refira apenas aos sentimentos, mas ao julgamento que voc√™ faz de si mesmo ou de alguma situa√ß√£o. Escreva de forma clara, natural e objetiva.</p>
				<textarea id="patient-thought" placeholder="Digite aqui o que voc√™ julga sobre si ou sobre a situa√ß√£o..."></textarea>
				<div class="buttons">
					<button data-previous="step2">Voltar</button>
					<button data-next="step4">Prosseguir</button>
				</div>
			</div>
		</section>
		<!-- EXERC√çCIO (ABA 4) - POR QUE PENSO ASSIM? -->
		<section id="step4" class="page">
			<div class="content">
				<h2>Por que penso assim?</h2>
				<p id="distortions-info"></p>
				<p id="distortion-extra"></p>
				<div class="buttons">
					<button data-previous="step3">Voltar</button>
					<button data-next="step5">Prosseguir</button>
				</div>
			</div>
		</section>
		<!-- EXERC√çCIO (ABA 5) - PENSAMENTO ALTERNATIVO -->
		<section id="step5" class="page">
			<div class="content">
				<h2>Pensamento Funcional</h2>
				<p id="functional-thought"></p>
				<!-- Removido o extra, fica s√≥ o pensamento funcional -->
				<div class="buttons">
					<button data-previous="step4">Voltar</button>
					<button data-next="step6">Prosseguir</button>
				</div>
			</div>
		</section>
		<!-- EXERC√çCIO (ABA 6) - DESFUS√ÉO COGNITIVA -->
		<section id="step6" class="page">
			<div class="content">
				<h2>Desfus√£o Cognitiva</h2>
				<p id="defusion-text"></p>
				<div class="buttons">
					<button data-previous="step5">Voltar</button>
					<button data-next="step7">Prosseguir</button>
				</div>
			</div>
		</section>
		<!-- EXERC√çCIO (ABA 7) - EXERC√çCIO PROPOSTO -->
		<section id="step7" class="page">
			<div class="content">
				<h2>Exerc√≠cio Proposto</h2>
				<p id="exercise-info"></p>
				<p id="exercise-extra"></p>
				<div class="buttons">
					<button data-previous="step6">Voltar</button>
					<button data-next="step8">Prosseguir</button>
				</div>
			</div>
		</section>
		<!-- EXERC√çCIO (ABA 8) - CUIDADO E APOIO -->
		<section id="step8" class="page">
			<div class="content">
				<h2>Cuidado e Apoio</h2>
				<p id="encouragement-info"></p>
				<p id="encouragement-extra"></p>
				<div class="buttons">
					<button data-previous="step7">Voltar</button>
					<button data-next="step9">Prosseguir</button>
				</div>
			</div>
		</section>
		<!-- EXERC√çCIO (ABA 9) - ENCERRAMENTO -->
		<section id="step9" class="page">
			<div class="content">
				<h2>Encerramento</h2>
				<p id="closing-text"></p>
				<div class="buttons">
					<button data-previous="step8">Voltar</button>
					<button data-next="landing">Prosseguir</button>
				</div>
			</div>
		</section>
		<!-- LANDING (FINAL) -->
		<section id="landing" class="page">
			<div class="content">
				<h2>Compartilhe algo comigo</h2>
				<p style="text-align: justify;"> Se desejar, escreva algo que queira compartilhar neste momento. Ao clicar no bot√£o abaixo, voc√™ ser√° redirecionado(a) ao WhatsApp para enviar sua mensagem. </p>
				<textarea id="final-message" placeholder="Digite aqui o que deseja compartilhar..."></textarea>
				<div class="buttons" style="justify-content: center;">
					<button data-previous="step9">Voltar</button>
					<button id="sendWhatsApp" data-next="send" class="whatsapp-button">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" style="width:1.2rem; height:1.2rem; fill:#fff;">
							<path d="M380.9 97.1C339 55.2 283.5 32 224 32 100.3 32 0 132.3 0 256c0 45.9 
            12 90.1 34.7 129.6L0 480l94.3-34.7C132.9 500 177.1 512 224 512c123.7 0 
            224-100.3 224-224 0-59.5-23.2-115-65.1-157.9zM224 464c-41.3 0-81-10.1-116.2-29
            l-8.2-4.8-55.9 20.6L72 394.2c-19.8-23.2-30.2-53.1-30.2-84.2 0-92.6 75.4-168 
            168-168 45.2 0 87.7 17.6 119.3 49.2C392.4 203.3 408 245.8 408 291c0 92.6-75.4 
            168-168 168zm101.3-138.6c-5.5-2.7-32.7-16.1-37.8-17.9-5.1-1.8-8.8-2.7-12.5 2.7
            s-14.3 17.9-17.5 21.6-6.4 4-11.9 1.3c-5.5-2.7-23.4-8.6-44.5-27.4-16.5-14.7-27.6
            -32.9-30.8-38.4-3.2-5.5-.3-8.6 2.4-11.3 2.5-2.5 5.5-6.4 8.2-9.6 2.7-3.2 3.6-5.5 
            5.5-9.2 1.8-3.6.9-6.8-.5-9.6-1.4-2.7-12.5-30.2-17.1-41.4-4.5-11.1-9.1-9.6
            -12.5-9.8-3.2-.2-6.8-.2-10.4-.2s-9.6 1.4-14.6 6.8c-5 5.5-19.1 18.7-19.1 45.4 
            0 26.8 19.5 52.7 22.2 56.3 2.7 3.6 38.8 59.3 94.1 82.9 13.2 5.7 23.5 9.1 
            31.6 11.6 13.2 3.9 25.2 3.4 34.8 2.1 10.6-1.4 32.7-13.4 37.3-26.4 4.5-13.2 
            4.5-24.5 3.2-26.4-1.3-1.8-5-2.7-10.5-4.4z" />
						</svg> Enviar </button>
					<!-- Bot√£o Concluir para fechar o aplicativo -->
					<button id="closeApp">Concluir</button>
				</div>
			</div>
		</section>
	</main>
	<footer>
		<p>Richelmy Murta, Psic√≥logo Cl√≠nico Especialista em Terapia Cognitivo-Comportamental</p>
		<p>¬Æ Todos os direitos reservados</p>
	</footer>
	<script src="https://cdn.jsdelivr.net/npm/gsap@3/dist/gsap.min.js"></script>
	<script type="module">
		document.addEventListener("DOMContentLoaded", () => {
		localStorage.removeItem('guiaApoioRespostas');
		
		  /*
		    Fluxo:
		    1) splash (some ap√≥s 2s)
		    2) onb1, onb2, onb3, onb4 (Onboarding)
		    3) step1 (nome e data)
		    4) step2 (sentimentos)
		    5) step3 (pensamento)
		    6) step4 (por que penso assim?)
		    7) step5 (pensamento funcional)
		    8) step6 (desfus√£o cognitiva)
		    9) step7 (exerc√≠cio proposto)
		    10) step8 (cuidado e apoio)
		    11) step9 (encerramento)
		    12) landing (WhatsApp)
		  */
		
		  // Elementos e vari√°veis principais
		  const pages = document.querySelectorAll('.page');
		  const trophiesContainer = document.getElementById('trophies-container');
		  const encouragementMsg = document.getElementById('encouragement-msg');
		  const sendWhatsAppBtn = document.getElementById('sendWhatsApp');
		  const finalMessageInput = document.getElementById('final-message');
		
		  // Ap√≥s a p√°gina carregar, esperamos 2 segundos e mudamos para "onb1"
		  setTimeout(() => {
		    showPage('onb1');
		  }, 2000);
		
		  // Objeto de respostas ‚Äì inclui campos para armazenar textos das abas
		  const responses = {
		    name: "",
		    date: "",
		    feelings: [],
		    thought: "",
		    distortionText: "",
		    distortionExtra: "",
		    functionalText: "",
		    functionalExtra: "",
		    defusionDisplayed: false, 
		    exerciseText: "",
		    exerciseExtra: "",
		    encouragementText: "",
		    encouragementExtra: "",
		    closingTextStored: ""
		  };
		
		  // Fun√ß√£o para extrair o primeiro nome
		  const getFirstName = () => {
		    return responses.name ? responses.name.trim().split(" ")[0] : "voc√™";
		  };
		
		  // Carregar e salvar dados no localStorage
		  const loadResponses = () => {
		    const saved = localStorage.getItem('guiaApoioRespostas');
		    if (saved) Object.assign(responses, JSON.parse(saved));
		  };
		  const saveResponses = () => {
		    localStorage.setItem('guiaApoioRespostas', JSON.stringify(responses));
		  };
		  loadResponses();
		
		  // Anima√ß√£o de transi√ß√£o com GSAP
		  const showPage = (id) => {
		    const nextPage = document.getElementById(id);
		    const currentActive = document.querySelector('.page.active');
		  
		    if (currentActive && currentActive !== nextPage) {
		      gsap.to(currentActive, {
		        opacity: 0,
		        scale: 0.9,
		        duration: 0.4,
		        onComplete: () => {
		          currentActive.classList.remove('active');
		          nextPage.classList.add('active');
		          gsap.fromTo(
		            nextPage,
		            { opacity: 0, scale: 0.9 },
		            { opacity: 1, scale: 1, duration: 0.5, ease: "power2.out" }
		          );
		        }
		      });
		    } else {
		      nextPage.classList.add('active');
		      gsap.fromTo(
		        nextPage,
		        { opacity: 0, scale: 0.9 },
		        { opacity: 1, scale: 1, duration: 0.5, ease: "power2.out" }
		      );
		    }
		  
		    // Ajusta o texto se for step4..step9
		    handlePageContent(id);
		  };
		
		  // Handler para voltar (bot√µes "Voltar")
		  document.querySelectorAll('button[data-previous]').forEach(btn => {
		    btn.addEventListener('click', () => {
		      const prevPageId = btn.dataset.previous;
		      showPage(prevPageId);
		    });
		  });
		
		  // Configura√ß√£o da sele√ß√£o de emo√ß√µes ‚Äì 12 emo√ß√µes negativas comuns
		  const feelingsList = [
		    { label: "Tristeza", emoji: "üò¢" },
		    { label: "Ansiedade", emoji: "üòü" },
		    { label: "Medo", emoji: "üò®" },
		    { label: "P√¢nico", emoji: "üò∞" },
		    { label: "Desespero", emoji: "üò≠" },
		    { label: "Culpa", emoji: "üòû" },
		    { label: "Vergonha", emoji: "üò≥" },
		    { label: "Raiva", emoji: "üò†" },
		    { label: "Confus√£o", emoji: "üòï" },
		    { label: "Solid√£o", emoji: "üòî" },
		    { label: "Des√¢nimo", emoji: "üò©" },
		    { label: "Irrita√ß√£o", emoji: "üò°" }
		  ];
		  const feelingsGrid = document.getElementById('feelings-grid');
		  if (feelingsGrid) {
		    feelingsList.forEach(feeling => {
		      const div = document.createElement('div');
		      div.classList.add('feeling-option');
		      div.textContent = `${feeling.emoji} ${feeling.label}`;
		      div.dataset.value = feeling.label;
		      div.addEventListener('click', () => {
		        div.classList.toggle('selected');
		        if (div.classList.contains('selected')) {
		          if (!responses.feelings.includes(feeling.label)) {
		            responses.feelings.push(feeling.label);
		          }
		        } else {
		          responses.feelings = responses.feelings.filter(f => f !== feeling.label);
		        }
		        saveResponses();
		      });
		      feelingsGrid.appendChild(div);
		    });
		  }
		
		  // Gera ou exibe o conte√∫do de cada aba (step4..step9)
		  const handlePageContent = (id) => {
		    switch (id) {
		      case 'step4': {
		        addTrophy('step4');
		        if (!responses.distortionText) {
		          // 5 textos alternativos, cada um iniciando com o nome do paciente + explica√ß√£o
		          const distortionsOptions = [
		            `${getFirstName()}, na maioria das vezes, este pensamento que voc√™ teve resulta de uma distor√ß√£o cognitiva. Elas surgem de cren√ßas e viv√™ncias passadas que alteram nossa percep√ß√£o dos fatos. Um exemplo √© a supergeneraliza√ß√£o: √Äs vezes, supergeneralizamos um evento negativo, ampliando suas consequ√™ncias de maneira exagerada, e passamos a enxergar todas as situa√ß√µes de forma extremamente pessimista e limitante.`,
		            `${getFirstName()}, na maioria das vezes, este pensamento que voc√™ teve resulta de uma distor√ß√£o cognitiva. Elas se originam de interpreta√ß√µes autom√°ticas que nem sempre refletem a realidade. Um exemplo √© a personaliza√ß√£o: Podemos cair na personaliza√ß√£o, assumindo responsabilidades por acontecimentos que est√£o fora do nosso controle e interpretando cada detalhe como se fosse exclusivamente nossa culpa, mesmo quando n√£o o √©.`,
		            `${getFirstName()}, na maioria das vezes, este pensamento que voc√™ teve resulta de uma distor√ß√£o cognitiva. Elas podem surgir quando nos baseamos em pressupostos pouco fundamentados. Um exemplo √© a leitura mental: A leitura mental ocorre quando presumimos saber o que os outros pensam, formando conclus√µes precipitadas e equivocadas que distorcem a realidade e prejudicam nossa comunica√ß√£o.`,
		            `${getFirstName()}, na maioria das vezes, este pensamento que voc√™ teve resulta de uma distor√ß√£o cognitiva. Geralmente, ela aparece quando tememos desfechos ruins sem considerar outras possibilidades. Um exemplo √© a catastrofiza√ß√£o: Ela transforma pequenos problemas em grandes amea√ßas, fazendo-nos acreditar que situa√ß√µes adversas ter√£o consequ√™ncias devastadoras, mesmo quando isso n√£o corresponde √† realidade.`,
		            `${getFirstName()}, na maioria das vezes, este pensamento que voc√™ teve resulta de uma distor√ß√£o cognitiva. Essas distor√ß√µes se refor√ßam quando nos concentramos apenas no lado negativo. Um exemplo √© a filtragem mental: Focamos somente nos aspectos negativos de uma experi√™ncia, ignorando sistematicamente qualquer elemento positivo que possa existir, o que agrava nossa vis√£o
		distorcida da realidade.`
		          ];
		          responses.distortionText =
		            distortionsOptions[Math.floor(Math.random() * distortionsOptions.length)];
		          // Sem frase adicional
		          responses.distortionExtra = "";
		          saveResponses();
		        }
		        document.getElementById('distortions-info').textContent = responses.distortionText;
		        document.getElementById('distortion-extra').textContent = responses.distortionExtra;
		        break;
		      }
		      case 'step5': {
		        addTrophy('step5');
		        if (!responses.functionalText) {
		          // 10 exemplos de frases iniciais
		          const functionalExamples = [
		            "Estou tendo um pensamento que: ",
		            "Percebo que minha mente formulou a ideia de: ",
		            "Reconhe√ßo um pensamento que diz: ",
		            "Identifico agora um pensamento que afirma: ",
		            "Dou-me conta de um pensamento que expressa: ",
		            "Surgiu em minha mente a seguinte possibilidade: ",
		            "Notei a presen√ßa de um pensamento indicando: ",
		            "Verifico que minha mente sugeriu a ideia de: ",
		            "Observo um pensamento que descreve: ",
		            "Percebo neste instante um pensamento que aponta: "
		          ];
		          const randomIntro = functionalExamples[Math.floor(Math.random() * functionalExamples.length)];
		          responses.functionalText = randomIntro + responses.thought;
		          // Nesta aba fica somente o pensamento funcional
		          responses.functionalExtra = "";
		          saveResponses();
		        }
		        document.getElementById('functional-thought').textContent = responses.functionalText;
		        break;
		      }
		      case 'step6': {
		        addTrophy('step6');
		        if (!responses.defusionDisplayed) {
		          const defusionText = `Ent√£o, ${getFirstName()}, a desfus√£o cognitiva permite enxergar os pensamentos como meros eventos transit√≥rios da mente, ampliando a percep√ß√£o de que eles n√£o definem a realidade e, assim, reduzindo significativamente seu impacto emocional e mental.`;
		          document.getElementById('defusion-text').textContent = defusionText;
		          responses.defusionDisplayed = true;
		          saveResponses();
		        } else {
		          document.getElementById('defusion-text').textContent = `Ent√£o, ${getFirstName()}, a desfus√£o cognitiva permite enxergar os pensamentos como meros eventos transit√≥rios da mente, ampliando a percep√ß√£o de que eles n√£o definem a realidade e, assim, reduzindo significativamente seu impacto emocional e mental.`;
		        }
		        break;
		      }
		      case 'step7': {
		        addTrophy('step7');
		        if (!responses.exerciseText) {
		          // 10 propostas de 40 palavras, cada come√ßando com "Neste caso, {name}, seria importante voc√™ fazer..."
		          const exerciseProposals = [
		            `Neste caso, ${getFirstName()}, seria importante voc√™ fazer: Exerc√≠cio - Reconhecendo Pensamentos. Reserve cinco minutos para escrever seu pensamento. Em seguida, identifique a emo√ß√£o presente e reflita sobre poss√≠veis interpreta√ß√µes. Isso funciona pois amplia sua perspectiva e reduz a intensidade emocional.`,
		            `Neste caso, ${getFirstName()}, seria importante voc√™ fazer: Exerc√≠cio - Caminhada Atenta. Durante tr√™s minutos, caminhe lentamente, notando cada passo. Observe o contato dos p√©s com o ch√£o. Isso funciona pois envolve o presente, reduzindo pensamentos autom√°ticos e promovendo tranquilidade profunda.`,
		            `Neste caso, ${getFirstName()}, seria importante voc√™ fazer: Exerc√≠cio - Respira√ß√£o Consciente. Feche os olhos e inspire lentamente, sentindo o ar preencher seus pulm√µes. Expire devagar, liberando tens√µes. Esse processo reduz a reatividade mental e amplia a percep√ß√£o de calma interior.`,
		            `Neste caso, ${getFirstName()}, seria importante voc√™ fazer: Exerc√≠cio - Rotulando Pensamentos. Quando surgir uma ideia perturbadora, rotule-a como preocupa√ß√£o ou lembran√ßa, sem se aprofundar. Esse m√©todo separa voc√™ do conte√∫do mental, aliviando press√µes e fortalecendo a capacidade de observar neutralmente.`,
		            `Neste caso, ${getFirstName()}, seria importante voc√™ fazer: Exerc√≠cio - Di√°rio de Conquistas. Anote diariamente algo positivo que realizou ou enfrentou, descrevendo como se sentiu. Essa pr√°tica real√ßa aspectos construtivos da rotina, auxiliando a contrabalan√ßar pensamentos limitantes e nutrir motiva√ß√£o interna.`,
		            `Neste caso, ${getFirstName()}, seria importante voc√™ fazer: Exerc√≠cio - Visualiza√ß√£o Serena. Feche os olhos e imagine um cen√°rio, como uma praia ou campo florido. Observe detalhes aromas. Isso ameniza preocupa√ß√µes, estimula sensa√ß√µes positivas e reorienta a aten√ß√£o para o presente.`,
		            `Neste caso, ${getFirstName()}, seria importante voc√™ fazer: Exerc√≠cio - Reestrutura√ß√£o de Significados. Escolha um pensamento negativo recorrente e escreva vers√µes alternativas, buscando um ponto de vista menos r√≠gido. Isso reduz a sobrecarga e ajuda a enxergar possibilidades que pareciam inacess√≠veis.`,
		            `Neste caso, ${getFirstName()}, seria importante voc√™ fazer: Exerc√≠cio - Afirma√ß√µes Positivas. Formule declara√ß√µes construtivas, como ‚ÄúEu sou capaz de enfrentar desafios.‚Äù Repita-as diariamente, fortalecendo a cren√ßa em suas habilidades. Esse processo substitui pensamentos autom√°ticos negativos por vis√µes mais confiantes equilibradas.`,
		            `Neste caso, ${getFirstName()}, seria importante voc√™ fazer: Exerc√≠cio - Observando Emo√ß√µes. Feche os olhos e tente identificar onde sente cada emo√ß√£o no corpo. Reconhe√ßa sensa√ß√µes f√≠sicas sem julg√°-las. Esse m√©todo aumenta a compreens√£o emocional e evita rea√ß√µes impulsivas mais intensas.`,
		            `Neste caso, ${getFirstName()}, seria importante voc√™ fazer: Exerc√≠cio - Acolhendo Pensamentos. Sente-se confortavelmente e permita que cada pensamento surja sem tentar bloque√°-lo. Apenas reconhe√ßa sua presen√ßa e deixe-o partir. Isso reduz o apego √†s preocupa√ß√µes, gerando flexibilidade e estabilidade mental.`
		          ];
		          responses.exerciseText =
		            exerciseProposals[Math.floor(Math.random() * exerciseProposals.length)];
		          responses.exerciseExtra = "";
		          saveResponses();
		        }
		        document.getElementById('exercise-info').textContent = responses.exerciseText;
		        document.getElementById('exercise-extra').textContent = responses.exerciseExtra;
		        break;
		      }
		      case 'step8': {
		        addTrophy('step8');
		        if (!responses.encouragementText) {
		          // 5 textos de 40 palavras, cada iniciando com o nome do paciente
		          const encouragementsArray = [
		            `{name}, reconhecer suas conquistas √© essencial para manter a motiva√ß√£o. Cada passo dado fortalece sua coragem e desperta possibilidades. A confian√ßa nasce quando voc√™ percebe o pr√≥prio valor. Continue firme, pois seu processo de crescimento √© √∫nico e merece celebra√ß√£o.`,
		            `{name}, seu empenho reflete um compromisso genu√≠no com o pr√≥prio bem-estar. Ao encarar desafios com serenidade, voc√™ fortalece a resili√™ncia. Aprender a valorizar cada vit√≥ria, por menor que seja, aumenta a seguran√ßa interna. Acredite em si, pois h√° enorme potencial.`,
		            `{name}, cada passo dado em dire√ß√£o ao autoconhecimento mostra sua determina√ß√£o. Mesmo as pequenas conquistas devem ser celebradas, pois constroem alicerces para mudan√ßas duradouras. A vida se transforma quando acolhemos nossas vulnerabilidades. Confie nesse processo e permita-se avan√ßar com coragem.`,
		            `{name}, valorize cada instante de supera√ß√£o, pois √© nesse movimento que descobrimos nossa for√ßa interior. Pequenos esfor√ßos resultam em mudan√ßas. Aprender a respeitar o pr√≥prio ritmo garante uma evolu√ß√£o s√≥lida. Continue acreditando em seu potencial e mantendo foco nos objetivos.`,
		            `{name}, reconhecer limites e aceitar desafios faz parte de um caminho saud√°vel. Ao permitir-se crescer, voc√™ expande horizontes e aprende a lidar com dificuldades. Tenha paci√™ncia consigo, celebrando cada etapa. Assim, constr√≥i uma base firme para enfrentar qualquer adversidade futura.`
		          ];
		          const randomEncouragement =
		            encouragementsArray[Math.floor(Math.random() * encouragementsArray.length)];
		          // Substitui {name} pelo primeiro nome
		          responses.encouragementText = randomEncouragement.replace("{name}", getFirstName());
		          responses.encouragementExtra = "";
		          saveResponses();
		        }
		        document.getElementById('encouragement-info').textContent = responses.encouragementText;
		        document.getElementById('encouragement-extra').textContent = responses.encouragementExtra;
		        break;
		      }
		      case 'step9': {
		        addTrophy('step9');
		        if (!responses.closingTextStored) {
		          const closingText =
		            "Muito bem, {name}! Voc√™ concluiu esta etapa do Guia de Apoio. Esperamos que as reflex√µes e exerc√≠cios tenham lhe proporcionado novas perspectivas. Lembre-se: o autoconhecimento √© um processo cont√≠nuo e voc√™ pode revisitar estes passos sempre que desejar.";
		          responses.closingTextStored = closingText.replace("{name}", getFirstName());
		          saveResponses();
		        }
		        document.getElementById('closing-text').textContent = responses.closingTextStored;
		        break;
		      }
		      default:
		        break;
		    }
		  };
		
		  // Fun√ß√£o para adicionar trof√©u e mensagem de incentivo
		  const addTrophy = (step) => {
		    if (!trophiesContainer.querySelector(`[data-step="${step}"]`)) {
		      const trophy = document.createElement('span');
		      trophy.classList.add('trophy');
		      trophy.setAttribute('data-step', step);
		      trophy.textContent = '‚≠ê';
		      trophiesContainer.appendChild(trophy);
		
		      const encouragements = [
		        "Continue assim, {name}!",
		        "√ìtimo progresso, {name}!",
		        "Voc√™ est√° indo muito bem, {name}!",
		        "Excelente, {name}!",
		        "Parab√©ns pelo avan√ßo, {name}!"
		      ];
		      const randomMsg = encouragements[Math.floor(Math.random() * encouragements.length)];
		      encouragementMsg.textContent = randomMsg.replace("{name}", getFirstName());
		    }
		  };
		
		  // Bot√µes de navega√ß√£o "Prosseguir"
		  document.querySelectorAll('button[data-next]').forEach(btn => {
		    btn.addEventListener('click', () => {
		      const currentPageId = btn.closest('.page').id;
		      const nextPageId = btn.dataset.next;
		
		      // Valida√ß√µes obrigat√≥rias
		      if (currentPageId === 'step1') {
		        const userName = document.getElementById('user-name').value.trim();
		        const userDate = document.getElementById('user-date').value;
		        if (!userName || !userDate) {
		          alert("Por favor, preencha seu nome e a data.");
		          return;
		        }
		        responses.name = userName;
		        responses.date = userDate;
		        saveResponses();
		        addTrophy('step1');
		      }
		      if (currentPageId === 'step2') {
		        if (responses.feelings.length === 0) {
		          alert("Por favor, selecione pelo menos uma emo√ß√£o.");
		          return;
		        }
		        addTrophy('step2');
		      }
		      if (currentPageId === 'step3') {
		        const thought = document.getElementById('patient-thought').value.trim();
		        if (!thought) {
		          alert("Por favor, descreva seu pensamento principal.");
		          return;
		        }
		        responses.thought = thought;
		        saveResponses();
		        addTrophy('step3');
		      }
		
		      showPage(nextPageId);
		    });
		  });
		
		  // Bot√µes de navega√ß√£o "Voltar"
		  document.querySelectorAll('button[data-previous]').forEach(btn => {
		    btn.addEventListener('click', () => {
		      const prevPageId = btn.dataset.previous;
		      showPage(prevPageId);
		    });
		  });
		
		  // Envio via WhatsApp na landing final
		  if (sendWhatsAppBtn && finalMessageInput) {
		    sendWhatsAppBtn.addEventListener('click', () => {
		      const userMessage = finalMessageInput.value.trim() || "Ol√°, gostaria de compartilhar algo...";
		      const encodedMsg = encodeURIComponent(`Oi, sou ${getFirstName()}. ${userMessage}`);
		      window.open(`https://wa.me/5535984640729?text=${encodedMsg}`, '_blank');
		    });
		  }
		
		  // Bot√£o "Concluir" para fechar o aplicativo
		  const closeAppBtn = document.getElementById('closeApp');
		  if (closeAppBtn) {
		    closeAppBtn.addEventListener('click', () => {
		      window.close();
		    });
		  }
		});
	</script>
</body>

</html>
